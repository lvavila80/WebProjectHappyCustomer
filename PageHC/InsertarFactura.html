<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="icon" href="assets/media/logo.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HAPPY_COSTUMER</title>
        <!--====================STYLES======================-->
        <link rel="stylesheet" href="./assets/css/style.css">
        <!--==================== jsPDF ======================-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    </head>
<body>
    <!--====================NAVEGACIÓN======================-->
    <div class="container">
        <div class="navigation">
            <ul>
                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="happy-outline"></ion-icon>
                        </span>
                        <span class="tittle">Happy Costumers</span>
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <span class="icon">
                            <ion-icon name="home-outline"></ion-icon>
                        </span>
                        <span class="tittle">Inicio</span>
                    </a>
                </li>
                <li class="hovered">
                    <a href="Facturacion.html">
                        <span class="icon">
                            <ion-icon name="cart-outline"></ion-icon>
                        </span>
                        <span class="tittle">Facturación</span>
                    </a>
                </li>
                <li>
                    <a href="inventario.html" >
                        <span class="icon">
                            <ion-icon name="cube-outline"></ion-icon>
                        </span>
                        <span class="tittle">Inventario</span>
                    </a>
                </li>
                <li>
                    <a href="reportes.html">
                        <span class="icon">
                            <ion-icon name="bar-chart-outline"></ion-icon>
                        </span>
                        <span class="tittle">Reportes</span>
                    </a>
                </li>
                <li>
                    <a href="proveedores.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="tittle">Proveedores</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!--====================MAIN======================-->

    <div class="main">
        <div class="topbar">
            <div class="toggle">
                <ion-icon name="menu-outline"></ion-icon>
            </div>
            <div class="search">
                <label>
                    <input type="text" placeholder="Busqueda">
                    <ion-icon name="search-outline"></ion-icon>
                </label>
            </div>
            <div class="user">
                <img src="./assets/media/customer01.jpg" alt="">
            </div>
        </div>

        <!--====================INVENTARIO======================-->

        <div class="detailsForm">
            <div class="recentOrders">
                <div class="cardHeader">
                    <h2>Insertar factura</h2>
                </div>
                <form>
                    <div class="form-row">
                        <div class="form-group col">
                            <label for="invoiceDate">*Fecha de factura</label>
                            <input type="date" id="invoiceDate" required>
                        </div>
                        <div class="form-group col">
                            <label for="invoiceTime">*Hora de facturación</label>
                            <input type="time" id="invoiceTime" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col">
                            <label for="rutNumber">*RUT</label>
                            <input type="number" id="rutNumber" required>
                        </div>
                        <div class="form-group col">
                            <label for="invoiceType">*Tipo de factura</label>
                            <select id="invoiceType" required>
                                <option value="">Seleccione una opción</option>
                                <option value="electronics">Electrónica</option>
                                <option value="apparel">Física</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col">
                            <label for="paymentMethod">*Método de pago</label>
                            <select id="paymentMethod" required>
                                <option value="">Seleccione una opción</option>
                                <option value="credit_card">Tarjeta de crédito</option>
                                <option value="cash">Efectivo</option>
                                <option value="bank_transfer">Transferencia bancaria</option>
                                <option value="check">Cheque</option>
                                <option value="financing">Financiación</option>
                                <option value="paypal">PayPal</option>
                                <option value="cryptocurrency">Criptomonedas</option>
                            </select>
                        </div>
                        <div class="form-group col">
                            <label for="supplier">*Proveedor</label>
                            <select id="supplier" required>
                                <option value="">Seleccione un proveedor</option>
                                <option value="supplier1">Suministros Papel S.A.S</option>
                                <option value="supplier2">Limpieza total Ltda</option>
                                <option value="supplier3">Tecnología Avanzada S.A</option>
                                <option value="supplier4">Alimentos Deliciosos S.A.S</option>
                            </select>
                        </div>
                    </div>
                    <!-- Sección para agregar productos -->
                    <div id="products-section">
                        <div class="form-row" id="product-row-1">
                            <div class="form-group col">
                                <label for="CodProduct-1">*Código de producto</label>
                                <input type="number" id="CodProduct-1" name="products[0][code]" required>
                            </div>
                            <div class="form-group col">
                                <label for="quantity-1">*Cantidad</label>
                                <input type="number" id="quantity-1" name="products[0][quantity]" required>
                            </div>
                            
                            <div class="form-group col">
                                <button type="button" class="btn" onclick="addProduct()">Agregar otro producto</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        
                    </div>
                    <!-- Botón de envío del formulario -->
            
                    <div class="button">
                        <button type="button" class="btn" onclick="downloadPDF()">Descargar PDF</button>
                        <button type="submit" class="btn">Crear factura</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!--==================== SCRIPTS ======================-->
    
    <script>
        let productCount = 1; // Contador para mantener la cuenta de los productos
    
        function addProduct() {
            productCount++;
            let productsSection = document.getElementById('products-section');
            let newProductRow = document.createElement('div');
            newProductRow.classList.add('form-row');
            newProductRow.id = 'product-row-' + productCount;
            newProductRow.innerHTML = `
                <div class="form-group col">
                    <label for="CodProduct-${productCount}">*Código de producto</label>
                    <input type="number" id="CodProduct-${productCount}" name="products[${productCount-1}][code]" required>
                </div>
                <div class="form-group col">
                    <label for="quantity-${productCount}">*Cantidad</label>
                    <input type="number" id="quantity-${productCount}" name="products[${productCount-1}][quantity]" required>
                </div>
                <div class="form-group col">
                    <button type="button" class="btn" onclick="removeProductRow(${productCount})">Eliminar producto</button>
                </div>
            `;
            productsSection.appendChild(newProductRow);
        }
    
        function removeProductRow(productId) {
            let productRow = document.getElementById('product-row-' + productId);
            if (productRow) {
                productRow.remove();
            }
        }

        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const invoiceDate = document.getElementById('invoiceDate').value;
            const invoiceTime = document.getElementById('invoiceTime').value;
            const rutNumber = document.getElementById('rutNumber').value;
            const invoiceType = document.getElementById('invoiceType').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const supplier = document.getElementById('supplier').value;

            let yPosition = 10;

            doc.text(`Fecha de factura: ${invoiceDate}`, 10, yPosition);
            yPosition += 10;
            doc.text(`Hora de facturación: ${invoiceTime}`, 10, yPosition);
            yPosition += 10;
            doc.text(`RUT: ${rutNumber}`, 10, yPosition);
            yPosition += 10;
            doc.text(`Tipo de factura: ${invoiceType}`, 10, yPosition);
            yPosition += 10;
            doc.text(`Método de pago: ${paymentMethod}`, 10, yPosition);
            yPosition += 10;
            doc.text(`Proveedor: ${supplier}`, 10, yPosition);
            // Agrega más campos y lógica según necesites

            doc.save('factura.pdf');
        }
    </script>
</body>
</html>